# Примитивная база данных на Python

## Цель проекта

Этот проект представляет собой простую консольную систему управления базами данных (СУБД), написанную на Python. Основная цель — изучить и применить на практике ключевые аспекты разработки ПО:
- Управление зависимостями и сборка проекта с помощью **Poetry**.
- Разделение логики на модули (ядро, парсер, движок, утилиты).
- Работа с файловой системой и хранение данных в формате JSON.
- Создание интерактивного консольного интерфейса (CLI).
- Контроль качества кода с использованием линтера **Ruff**.
- Автоматизация задач с помощью **Makefile**.
- Реализация продвинутых концепций Python, таких как декораторы для повышения надежности кода.

## Установка и запуск

Проект использует [Poetry](https://python-poetry.org/) для управления зависимостями и [pipx](https://pypa.github.io/pipx/) для установки в систему.

### Требования

*   Python 3.10+
*   Poetry
*   pipx

## Команды

Система поддерживает операции для управления таблицами и данными через консольный интерфейс.

### Управление таблицами

*   `create_table <имя_таблицы> <столбец1:тип> ...`
    Создает новую таблицу с указанными столбцами. Автоматически добавляет столбец `ID:int`.
    Поддерживаемые типы: `int`, `str`, `bool`.

*   `list_tables`
    Выводит список всех существующих таблиц.

*   `drop_table <имя_таблицы>`
    Удаляет указанную таблицу. Перед удалением запрашивает подтверждение.

### Операции с данными (CRUD)

*   `insert into <имя_таблицы> values (<значение1>, ...)`
    Добавляет новую запись в таблицу. Значения должны соответствовать типам данных столбцов и передаваться в правильном порядке. Строковые значения можно передавать в кавычках.
    **Пример:** `insert into users values ("Alice", 25, true)`

*   `select from <имя_таблицы> [where <столбец> = <значение>]`
    Выбирает и выводит записи из таблицы. Если условие `where` не указано, выводятся все записи.
    **Пример:** `select from users where age = 25`

*   `update <имя_таблицы> set <столбец> = <новое_значение> where <условие>`
    Обновляет поля в записях, которые соответствуют условию `where`.
    **Пример:** `update users set age = 26 where name = "Alice"`

*   `delete from <имя_таблицы> where <условие>`
    Удаляет записи, соответствующие условию `where`.
    **Пример:** `delete from users where ID = 1`

*   `info <имя_таблицы>`
    Выводит информацию о структуре таблицы и количестве записей в ней.

### Общие команды

*   `help` — Показать справочную информацию по всем командам.
*   `exit` — Выйти из программы.

## Продвинутые возможности и безопасность

Для повышения надежности и удобства использования в проекте реализованы декораторы:

*   **Безопасная обработка ошибок:** Декоратор `@handle_db_errors` перехватывает большинство стандартных ошибок (неверный формат команды, несуществующая таблица, ошибки валидации) и выводит понятные сообщения, не прерывая работу программы и не изменяя файлы с данными.
*   **Подтверждение опасных действий:** Декоратор `@confirm_action` защищает от случайного удаления данных, запрашивая у пользователя подтверждение перед выполнением команд `drop_table`, `update` и `delete`.

## Демонстрация работы

[![asciicast](https://asciinema.org/a/W5VKHn76p3HQvMfAcIIfQv8tD.svg)](https://asciinema.org/a/W5VKHn76p3HQvMfAcIIfQv8tD)




