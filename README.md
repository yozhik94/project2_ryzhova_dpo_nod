# Примитивная база данных на Python

## Цель проекта

Этот проект представляет собой простую консольную систему управления базами данных (СУБД), написанную на Python. Основная цель — изучить и применить на практике ключевые аспекты разработки ПО:
- Управление зависимостями и сборка проекта с помощью **Poetry**.
- Разделение логики на модули (ядро, движок, утилиты).
- Работа с файловой системой и хранение метаданных в формате JSON.
- Создание интерактивного консольного интерфейса (CLI).
- Контроль качества кода с использованием линтера **Ruff**.
- Автоматизация задач с помощью **Makefile**.
- Реализация продвинутых концепций Python, таких как декораторы для повышения надежности кода.

## Установка и запуск

Проект использует [Poetry](https://python-poetry.org/) для управления зависимостями и [pipx](https://pypa.github.io/pipx/) для установки в систему.

### Требования

*   Python 3.10+
*   Poetry
*   pipx

## Управление таблицами

Система поддерживает базовые операции для управления таблицами через консольный интерфейс.

### Синтаксис команд

*   `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ...`
    Создает новую таблицу с указанными столбцами. Автоматически добавляет столбец `ID:int`.
    Поддерживаемые типы: `int`, `str`, `bool`.

    **Пример:**
    ```
    >>> Введите команду: create_table users name:str age:int is_active:bool
    Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool
    ```

*   `list_tables`
    Выводит список всех существующих таблиц.

    **Пример:**
    ```
    >>> Введите команду: list_tables
    Список таблиц:
    - users
    ```

*   `drop_table <имя_таблицы>`
    Удаляет указанную таблицу. Перед удалением запрашивает подтверждение.

    **Пример:**
    ```
    >>> Введите команду: drop_table users
    Вы уверены, что хотите удаление таблицы? [y/n]: y
    Таблица "users" успешно удалена.
    ```

### Общие команды

*   `help` — Показать справочную информацию по всем командам.
*   `exit` — Выйти из программы.

## Продвинутые возможности и безопасность

Для повышения надежности и удобства использования в проекте реализованы декораторы:

*   **Безопасная обработка ошибок:** Декоратор `@handle_db_errors` перехватывает большинство стандартных ошибок (неверный формат команды, несуществующая таблица, ошибки валидации) и выводит понятные сообщения, не прерывая работу программы и не изменяя файл с данными.
*   **Подтверждение опасных действий:** Декоратор `@confirm_action` защищает от случайного удаления данных, запрашивая у пользователя подтверждение перед выполнением команды `drop_table`.

## Демонстрация работы

[![asciicast](https://asciinema.org/a/zC0NMdTwy31dpx2mdAoy7Lh4Y.svg)](https://asciinema.org/a/zC0NMdTwy31dpx2mdAoy7Lh4Y)


